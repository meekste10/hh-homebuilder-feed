<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Home Builder Feed ‚Äì Audio + News</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #f4f5f7;
      --card-bg: #ffffff;
      --accent: #1c7c54;
      --accent-soft: #e4f3eb;
      --accent-soft-2: #f2f7ff;
      --accent-text: #0b3d2c;
      --danger: #b00020;
      --border-subtle: #e0e4ea;
      --text-main: #111827;
      --text-muted: #6b7280;
      --pill-bg: #eef2ff;
      --pill-text: #4338ca;
      --radius-lg: 18px;
      --radius-pill: 999px;
      --shadow-soft: 0 18px 45px rgba(15, 23, 42, 0.18);
      --shadow-subtle: 0 1px 3px rgba(15, 23, 42, 0.08);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 24px 16px 40px;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #f7fafc 0, #eef2ff 40%, #e5f5ee 100%);
      color: var(--text-main);
      display: flex;
      justify-content: center;
    }

    .app-shell {
      width: 100%;
      max-width: 840px;
    }

    .card {
      background: linear-gradient(145deg, #ffffff, #f7fafc);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-soft);
      padding: 22px 20px 20px;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      gap: 8px;
      align-items: flex-start;
      margin-bottom: 16px;
    }

    .title-block h1 {
      font-size: 1.4rem;
      margin: 0;
      letter-spacing: -0.03em;
    }

    .subtitle {
      margin-top: 2px;
      font-size: 0.8rem;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .updated-pill {
      background: var(--accent-soft);
      color: var(--accent-text);
      border-radius: var(--radius-pill);
      padding: 4px 10px;
      font-size: 0.7rem;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .badge-ethos {
      background: #111827;
      color: #f9fafb;
      border-radius: var(--radius-pill);
      padding: 4px 10px;
      font-size: 0.7rem;
      letter-spacing: 0.03em;
      text-transform: uppercase;
      white-space: nowrap;
    }

    .badge-ethos span {
      opacity: 0.78;
    }

    .badge-ethos strong {
      font-weight: 600;
    }

    .controls-row {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
      gap: 12px;
      margin-bottom: 10px;
      align-items: center;
    }

    @media (max-width: 640px) {
      body { padding-inline: 12px; }
      .controls-row {
        grid-template-columns: minmax(0, 1fr);
      }
      .subtitle { flex-direction: column; align-items: flex-start; }
    }

    .field-group {
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 0.76rem;
      color: var(--text-muted);
    }

    .field-group label {
      font-weight: 600;
      letter-spacing: 0.03em;
      text-transform: uppercase;
      font-size: 0.68rem;
    }

    select, input[type="search"] {
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      padding: 7px 11px;
      font-size: 0.8rem;
      outline: none;
      background: #ffffff;
      box-shadow: var(--shadow-subtle);
      appearance: none;
      width: 100%;
    }

    select:focus, input[type="search"]:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(28,124,84,0.08), var(--shadow-subtle);
    }

    .select-wrapper {
      position: relative;
    }

    .select-wrapper::after {
      content: "‚ñæ";
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 0.7rem;
      color: var(--text-muted);
      pointer-events: none;
    }

    .filters-row {
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 0.9fr);
      gap: 12px;
      margin-bottom: 12px;
    }

    @media (max-width: 640px) {
      .filters-row {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .search-input {
      position: relative;
    }

    .search-input input {
      padding-left: 28px;
    }

    .search-input svg {
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      width: 13px;
      height: 13px;
      opacity: 0.5;
    }

    .badges-row {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
      margin-bottom: 10px;
      align-items: center;
    }

    .badge-soft {
      border-radius: var(--radius-pill);
      background: var(--accent-soft-2);
      color: #1e293b;
      font-size: 0.7rem;
      padding: 4px 9px;
      display: inline-flex;
      align-items: center;
      gap: 5px;
      white-space: nowrap;
      cursor: pointer;
      border: 1px solid transparent;
    }

    .badge-soft span {
      font-size: 0.8em;
      opacity: 0.7;
    }

    .status-row {
      margin-bottom: 8px;
      font-size: 0.76rem;
      display: flex;
      justify-content: space-between;
      gap: 8px;
      align-items: center;
      color: var(--text-muted);
      flex-wrap: wrap;
    }

    .status-row strong {
      font-weight: 600;
      color: var(--text-main);
    }

    .status-row .failed {
      color: var(--danger);
      font-weight: 500;
    }

    .status-row button {
      border-radius: 999px;
      border: none;
      padding: 4px 10px;
      font-size: 0.72rem;
      background: #0f172a;
      color: #f9fafb;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .status-row button span {
      font-size: 0.9em;
      opacity: 0.7;
    }

    .status-row button:hover {
      background: #020617;
    }

    .list-meta-pill {
      border-radius: var(--radius-pill);
      background: #e5e7eb;
      padding: 3px 8px;
      font-size: 0.68rem;
      color: #374151;
    }

    .items-wrapper {
      border-radius: 18px;
      background: #f9fafb;
      border: 1px solid var(--border-subtle);
      padding: 10px 10px 8px;
      max-height: 62vh;
      overflow: auto;
    }

    .item-card {
      padding: 9px 7px 8px;
      border-radius: 14px;
      border-bottom: 1px solid rgba(148,163,184,0.28);
      display: grid;
      grid-template-columns: minmax(0, 1fr);
      gap: 4px;
    }

    .item-card:last-child {
      border-bottom-color: transparent;
    }

    .item-header {
      display: flex;
      justify-content: space-between;
      gap: 6px;
      align-items: flex-start;
    }

    .item-title {
      font-size: 0.88rem;
      font-weight: 600;
      margin: 0;
      line-height: 1.25;
    }

    .item-title a {
      color: inherit;
      text-decoration: none;
    }

    .item-title a:hover {
      text-decoration: underline;
    }

    .item-meta {
      font-size: 0.68rem;
      color: var(--text-muted);
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
    }

    .pill-small {
      border-radius: var(--radius-pill);
      padding: 2px 7px;
      font-size: 0.64rem;
      background: #e5e7eb;
      color: #374151;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .pill-small.podcast {
      background: #eef2ff;
      color: #3730a3;
    }

    .pill-small.audio-platform {
      background: #e0f2fe;
      color: #075985;
    }

    .item-snippet {
      font-size: 0.78rem;
      color: #4b5563;
      margin-top: 1px;
      line-height: 1.3;
    }

    .empty-state {
      text-align: center;
      padding: 30px 16px 10px;
      color: var(--text-muted);
      font-size: 0.86rem;
    }

    .empty-state strong {
      display: block;
      margin-bottom: 4px;
      color: var(--text-main);
    }

    .spinner {
      width: 14px;
      height: 14px;
      border-radius: 50%;
      border: 2px solid rgba(148,163,184,0.6);
      border-top-color: #111827;
      animation: spin 0.7s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .hidden { display: none !important; }
  </style>
</head>
<body>
  <main class="app-shell">
    <section class="card">
      <header class="card-header">
        <div class="title-block">
          <h1>Home Builder Feed</h1>
          <div class="subtitle">
            <div id="updatedDisplay" class="updated-pill">
              <span class="dot" style="width:6px;height:6px;border-radius:999px;background:#059669;display:inline-block;"></span>
              <span>Loading‚Ä¶</span>
            </div>
          </div>
        </div>
        <div class="badge-ethos">
          <span>PURPOSE &gt; PEOPLE &gt; PROCESS &gt;</span> <strong>PRODUCT</strong>
        </div>
      </header>

      <div class="controls-row">
        <div class="field-group">
          <label for="sourceSelect">Source</label>
          <div class="select-wrapper">
            <select id="sourceSelect"></select>
          </div>
        </div>
        <div class="field-group">
          <label for="typeSelect">Type</label>
          <div class="select-wrapper">
            <select id="typeSelect">
              <option value="all">All</option>
              <option value="Home Building News">Home Building News</option>
              <option value="Industry &amp; Market">Industry &amp; Market</option>
              <option value="Field / Structural">Field / Structural</option>
              <option value="Payment &amp; Risk">Payment &amp; Risk</option>
              <option value="Leadership / Mindset">Leadership / Mindset</option>
              <option value="Community / Sustainability">Community / Sustainability</option>
              <option value="Marketing &amp; Sales">Marketing &amp; Sales</option>
              <option value="Interior Design">Interior Design</option>
            </select>
          </div>
        </div>
      </div>

      <div class="filters-row">
        <div class="field-group">
          <label for="searchInput">Search</label>
          <div class="search-input">
            <input id="searchInput" type="search" placeholder="Titles, snippets, guests, topics‚Ä¶" />
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path fill="currentColor" d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79L19 20.5 20.5 19l-5-5zm-6 0C8.01 14 6 11.99 6 9.5S8.01 5 10.5 5 15 7.01 15 9.5 12.99 14 10.5 14z"></path>
            </svg>
          </div>
        </div>
        <div class="field-group">
          <label>Quick view</label>
          <div class="badges-row">
            <span id="badgeArticles" class="badge-soft">
              <span>‚óè</span> Articles
            </span>
            <span id="badgePodcasts" class="badge-soft">
              <span>üéß</span> Podcasts &amp; Audio
            </span>
          </div>
        </div>
      </div>

      <div class="status-row">
        <div>
          <span class="list-meta-pill">
            <strong id="countDisplay">0</strong> items
          </span>
          <span id="failedDisplay" class="failed hidden"></span>
        </div>
        <button id="refreshButton" type="button">
          <div class="spinner hidden" id="refreshSpinner"></div>
          <span>Refresh feeds</span>
        </button>
      </div>

      <div class="items-wrapper" id="itemsWrapper">
        <div class="empty-state" id="emptyState">
          <strong>No results.</strong>
          Try another source, broaden the type, or clear your search.
        </div>
      </div>
    </section>
  </main>

  <script>
    // ------------------------
    // CONFIG
    // ------------------------

    // Your rss2json API key
    const RSS2JSON_API_KEY = "ntizpxzcpgqefnsk0z9bnqxtbz5cica9bberpqbc";
    const RSS_PROXY_BASE = "https://api.rss2json.com/v1/api.json?";

    const FEEDS = [
      // --- ARTICLES: Industry & Building Science ---
      { id: "constructiondive", label: "Construction Dive ‚Äì News", url: "https://www.constructiondive.com/feeds/news/", type: "Industry & Market", kind: "article" },
      { id: "levelset", label: "Levelset ‚Äì Payment & Lien Insights", url: "https://www.levelset.com/feed/", type: "Payment & Risk", kind: "article" },
      { id: "probuilder", label: "Pro Builder Magazine", url: "https://www.probuilder.com/rss.xml", type: "Home Building News", kind: "article" },
      { id: "simpsonstrongtie", label: "Simpson Strong-Tie ‚Äì Building Strong", url: "https://blog.strongtie.com/feed/", type: "Field / Structural", kind: "article" },
      { id: "buildermag", label: "Builder Magazine", url: "https://www.builderonline.com/rss", type: "Industry & Market", kind: "article" },
      { id: "jlc", label: "Journal of Light Construction (JLC)", url: "https://www.jlconline.com/rss", type: "Field / Structural", kind: "article" },

      // --- PODCASTS: Homebuilding & Construction ---
      { id: "homebuildinghero", label: "Home Building Hero Podcast", url: "https://anchor.fm/s/7eefadc/podcast/rss", type: "Leadership / Mindset", kind: "podcast" },
      { id: "behindyourback", label: "Behind Your Back Podcast", url: "https://behindyourbackpodcast.libsyn.com/rss", type: "Leadership / Mindset", kind: "podcast" },
      { id: "buildingsustainably", label: "Building Sustainably ‚Äì Tim O‚ÄôBrien Homes", url: "https://feeds.buzzsprout.com/1141247.rss", type: "Community / Sustainability", kind: "podcast" },
      { id: "finehomebuilding", label: "Fine Homebuilding Podcast", url: "https://www.finehomebuilding.com/feed/podcast", type: "Field / Structural", kind: "podcast" },
      { id: "constructionleaders", label: "Construction Leadership Podcast (CMAA)", url: "https://cmaa.podbean.com/feed.xml", type: "Leadership / Mindset", kind: "podcast" },
      { id: "buildingcode", label: "The Building Code ‚Äì Buildertrend", url: "https://feeds.simplecast.com/9r2G7vQF", type: "Industry & Market", kind: "podcast" },

      // --- PODCASTS: Marketing & Sales ---
      { id: "hbmarketing", label: "Home Builder Digital Marketing Podcast", url: "https://feeds.castos.com/5o2zw", type: "Marketing & Sales", kind: "podcast" },
      { id: "buildergrowth", label: "Builder Marketing Growth Show", url: "https://www.buildermarketinggrowthshow.com/feed", type: "Marketing & Sales", kind: "podcast" },

      // --- PODCASTS: Interior Design ---
      { id: "interiordesignbiz", label: "Interior Design Business Podcast", url: "https://feed.podbean.com/thestartingdesigner/feed.xml", type: "Interior Design", kind: "podcast" },
      { id: "interiordesignmag", label: "Interior Design Magazine Podcast", url: "https://rss.art19.com/interior-design-magazine-podcast", type: "Interior Design", kind: "podcast" },

      // --- PODCASTS: HR & Leadership ---
      { id: "hbrideacast", label: "HBR IdeaCast", url: "https://feeds.megaphone.fm/hbrideacast", type: "Leadership / Mindset", kind: "podcast" },
      { id: "dailystoic", label: "The Daily Stoic", url: "https://feeds.megaphone.fm/dailystoic", type: "Leadership / Mindset", kind: "podcast" }
    ];

    // ------------------------
    // STATE
    // ------------------------
    let allItems = [];
    let failedFeeds = [];
    let isLoading = false;

    const sourceSelect = document.getElementById("sourceSelect");
    const typeSelect = document.getElementById("typeSelect");
    const searchInput = document.getElementById("searchInput");
    const itemsWrapper = document.getElementById("itemsWrapper");
    const emptyState = document.getElementById("emptyState");
    const updatedDisplay = document.getElementById("updatedDisplay");
    const countDisplay = document.getElementById("countDisplay");
    const failedDisplay = document.getElementById("failedDisplay");
    const refreshButton = document.getElementById("refreshButton");
    const refreshSpinner = document.getElementById("refreshSpinner");
    const badgeArticles = document.getElementById("badgeArticles");
    const badgePodcasts = document.getElementById("badgePodcasts");

    let showArticles = true;
    let showPodcasts = true;

    // ------------------------
    // INIT
    // ------------------------
    initSourceSelect();
    attachEvents();
    loadAllFeeds();

    function initSourceSelect() {
      FEEDS.forEach(feed => {
        const opt = document.createElement("option");
        opt.value = feed.id;
        opt.textContent = feed.label;
        sourceSelect.appendChild(opt);
      });
      const allOpt = document.createElement("option");
      allOpt.value = "all";
      allOpt.textContent = "All sources";
      sourceSelect.insertBefore(allOpt, sourceSelect.firstChild);
      sourceSelect.value = "all";
    }

    function attachEvents() {
      sourceSelect.addEventListener("change", renderFiltered);
      typeSelect.addEventListener("change", renderFiltered);
      searchInput.addEventListener("input", debounce(renderFiltered, 180));

      refreshButton.addEventListener("click", () => {
        loadAllFeeds(true);
      });

      badgeArticles.addEventListener("click", () => {
        showArticles = !showArticles;
        toggleBadgeActive(badgeArticles, showArticles);
        renderFiltered();
      });

      badgePodcasts.addEventListener("click", () => {
        showPodcasts = !showPodcasts;
        toggleBadgeActive(badgePodcasts, showPodcasts);
        renderFiltered();
      });

      toggleBadgeActive(badgeArticles, showArticles);
      toggleBadgeActive(badgePodcasts, showPodcasts);
    }

    function toggleBadgeActive(el, isOn) {
      if (isOn) {
        el.style.opacity = "1";
        el.style.border = "1px solid rgba(15,23,42,0.18)";
      } else {
        el.style.opacity = "0.4";
        el.style.border = "1px dashed rgba(148,163,184,0.7)";
      }
    }

    // ------------------------
    // DATA LOADING
    // ------------------------
    async function loadAllFeeds(force) {
      if (isLoading && !force) return;
      isLoading = true;
      allItems = [];
      failedFeeds = [];
      updateLoadingUI(true);

      const promises = FEEDS.map(feed => loadFeed(feed));
      await Promise.all(promises);

      isLoading = false;
      updateLoadingUI(false);
      renderFiltered();
      updateUpdatedTime();
      updateFailedDisplay();
    }

    async function loadFeed(feed) {
      const params = new URLSearchParams();
      params.set("rss_url", feed.url);
      if (RSS2JSON_API_KEY) {
        params.set("api_key", RSS2JSON_API_KEY);
      }

      const url = RSS_PROXY_BASE + params.toString();

      try {
        const res = await fetch(url);
        if (!res.ok) throw new Error("HTTP " + res.status);
        const data = await res.json();
        if (data.status !== "ok" || !Array.isArray(data.items)) {
          throw new Error("Bad RSS status");
        }

        const items = data.items.map(raw => normalizeItem(raw, feed));
        allItems.push(...items);
      } catch (err) {
        console.error("Feed failed:", feed.label, err);
        failedFeeds.push(feed.label);
      }
    }

    function normalizeItem(raw, feed) {
      const published = raw.pubDate || raw.published || raw.date || null;
      const date = published ? new Date(published) : null;
      const textContent = (raw.description || raw.content || "")
        .replace(/<[^>]+>/g, " ")
        .replace(/\s+/g, " ")
        .trim();

      const mediaTags = detectMediaTags(raw, feed);

      return {
        id: feed.id + "::" + (raw.guid || raw.link || raw.title),
        feedId: feed.id,
        feedLabel: feed.label,
        feedType: feed.type,
        kind: feed.kind,
        title: raw.title || "(Untitled)",
        url: raw.link || raw.guid || "#",
        isoDate: date ? date.toISOString() : null,
        displayDate: date ? date.toLocaleDateString(undefined, {
          month: "short",
          day: "numeric"
        }) : "No date",
        snippet: textContent.slice(0, 240) + (textContent.length > 240 ? "‚Ä¶" : ""),
        mediaTags
      };
    }

    function detectMediaTags(raw, feed) {
      const tags = [];
      const link = (raw.link || "").toLowerCase();
      const enclosure = raw.enclosure || {};

      const isAudio = feed.kind === "podcast" ||
        (enclosure.type && typeof enclosure.type === "string" &&
         enclosure.type.toLowerCase().startsWith("audio"));

      if (isAudio) {
        tags.push({ kind: "podcast", label: "Podcast / Audio" });
      }

      if (link.includes("spotify.com")) {
        tags.push({ kind: "platform", label: "Spotify" });
      }
      if (link.includes("podcasts.apple.com") || link.includes("itunes.apple.com")) {
        tags.push({ kind: "platform", label: "Apple Podcasts" });
      }
      if (link.includes("audible.com")) {
        tags.push({ kind: "platform", label: "Audible" });
      }
      if (link.includes("music.amazon.") || link.includes("amazon.com")) {
        tags.push({ kind: "platform", label: "Amazon" });
      }

      return tags;
    }

    // ------------------------
    // RENDERING
    // ------------------------
    function renderFiltered() {
      const sourceFilter = sourceSelect.value;
      const typeFilter = typeSelect.value;
      const q = searchInput.value.trim().toLowerCase();

      let items = allItems.slice();

      if (sourceFilter !== "all") {
        items = items.filter(i => i.feedId === sourceFilter);
      }

      if (typeFilter !== "all") {
        items = items.filter(i => i.feedType === typeFilter);
      }

      items = items.filter(i => {
        const isPodcast = i.kind === "podcast";
        if (!showArticles && !isPodcast) return false;
        if (!showPodcasts && isPodcast) return false;
        return true;
      });

      if (q) {
        items = items.filter(i =>
          i.title.toLowerCase().includes(q) ||
          i.snippet.toLowerCase().includes(q) ||
          i.feedLabel.toLowerCase().includes(q)
        );
      }

      items.sort((a, b) => {
        if (a.isoDate && b.isoDate) {
          return b.isoDate.localeCompare(a.isoDate);
        }
        return (b.title || "").localeCompare(a.title || "");
      });

      countDisplay.textContent = items.length.toString();
      itemsWrapper.innerHTML = "";

      if (items.length === 0) {
        itemsWrapper.appendChild(emptyState);
        emptyState.classList.remove("hidden");
        return;
      }

      emptyState.classList.add("hidden");

      for (const item of items) {
        itemsWrapper.appendChild(renderItemCard(item));
      }
    }

    function renderItemCard(item) {
      const card = document.createElement("article");
      card.className = "item-card";

      const header = document.createElement("div");
      header.className = "item-header";

      const titleEl = document.createElement("h2");
      titleEl.className = "item-title";
      const link = document.createElement("a");
      link.href = item.url;
      link.target = "_blank";
      link.rel = "noopener noreferrer";
      link.textContent = item.title;
      titleEl.appendChild(link);

      header.appendChild(titleEl);

      const meta = document.createElement("div");
      meta.className = "item-meta";

      const dateSpan = document.createElement("span");
      dateSpan.textContent = item.displayDate;
      meta.appendChild(dateSpan);

      const feedSpan = document.createElement("span");
      feedSpan.textContent = item.feedLabel;
      meta.appendChild(feedSpan);

      const isPodcast = item.kind === "podcast";
      const kindPill = document.createElement("span");
      kindPill.className = "pill-small " + (isPodcast ? "podcast" : "");
      kindPill.textContent = isPodcast ? "üéß Podcast" : "Article";
      meta.appendChild(kindPill);

      if (Array.isArray(item.mediaTags) && item.mediaTags.length > 0) {
        item.mediaTags.forEach(t => {
          if (t.kind === "platform") {
            const pill = document.createElement("span");
            pill.className = "pill-small audio-platform";
            pill.textContent = t.label;
            meta.appendChild(pill);
          }
        });
      }

      const snippet = document.createElement("p");
      snippet.className = "item-snippet";
      snippet.textContent = item.snippet;

      card.appendChild(header);
      card.appendChild(meta);
      card.appendChild(snippet);

      return card;
    }

    function updateLoadingUI(loading) {
      const label = updatedDisplay.querySelector("span:nth-child(2)");
      if (loading) {
        label.textContent = "Refreshing feeds‚Ä¶";
        refreshSpinner.classList.remove("hidden");
      } else {
        refreshSpinner.classList.add("hidden");
      }
    }

    function updateUpdatedTime() {
      const label = updatedDisplay.querySelector("span:nth-child(2)");
      const now = new Date();
      const timeStr = now.toLocaleTimeString(undefined, {
        hour: "numeric",
        minute: "2-digit"
      });
      label.textContent = "Updated " + timeStr;
    }

    function updateFailedDisplay() {
      if (failedFeeds.length === 0) {
        failedDisplay.classList.add("hidden");
        failedDisplay.textContent = "";
        return;
      }
      failedDisplay.classList.remove("hidden");
      failedDisplay.textContent =
        "Some feeds failed: " + failedFeeds.join(" ¬∑ ");
    }

    // ------------------------
    // UTIL
    // ------------------------
    function debounce(fn, delay) {
      let id;
      return (...args) => {
        clearTimeout(id);
        id = setTimeout(() => fn(...args), delay);
      };
    }
  </script>
</body>
</html>
